<!DOCTYPE html>
<html>
<title>MatchFour</title>
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Poppins:300" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">

<!--  note bootstrap 4.0.0-beta navbar stuff not working and bootstrap 3.3.7 doesn't have navbar fcn-->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="stylesheets/style.css" />

<body id="main">
  
<!--This responsive navbar template from https://v4-alpha.getbootstrap.com/components/navbar/ 
The built-in Bootstrap classes automatically toggle
a drop down menu on smaller devices.-->
<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="#">MatchFour</a>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-item nav-link active" href="#">New Game</a>
      <a class="nav-item nav-link" href="#">Log in/Sign up</a>
    </div>
  </div>
</nav>

<!--Bootstrap's 'row' class puts 'palette' div and 'board' div side-by-side-->
<div class="row">  
  
<!--      Color picker section-->  
<!--  Note classes with 'fa' prefix are all font-awesome icons-->
  <div class="palette"> 
    <div class="picker" value=0 id="pick_0">
      <a><i class="fa fa-tint fa-4x"></i></a>
    </div>
    <div class="picker" value=1 id="pick_1">
      <a><i class="fa fa-tint fa-4x"></i></a>
    </div>
    <div class="picker" value=2 id="pick_2">
      <a><i class="fa fa-tint fa-4x"></i></a>
    </div>
    <div class="picker" value=3 id="pick_3">
      <a><i class="fa fa-tint fa-4x"></i></a>
    </div>
    <div class="picker" value=4 id="pick_4">
      <a><i class="fa fa-tint fa-4x"></i></a>
    </div>
    <div class="picker" value=5 id="pick_5">
      <a><i class="fa fa-tint fa-4x"></i></a>
    </div>
  </div>

<!--      Game board section-->
<!--      TBD: Best to set up template for this to avoid the repetition-->
  <div class="board">  
    <div class="guess" id="guess_8">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div> 
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_7">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_6">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>          
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_5">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>          
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_4">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_3">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>          
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_2">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>          
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>

    <div class="guess" id="guess_1">
      <div class="playHere">
        <i class="fa fa-hand-pointer-o fa-rotate-90 fa-2x"></i>
      </div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>
      <div class="slot"></div>          
      <div class="pegs">
        <div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
          <div class="halfHeight">
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
            <div class="pegSlot">
              <div class="peg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="checkMark" title="Check this solution...">
        <a><i class="fa fa-check fa-3x"></i></a>
      </div>
    </div>
  </div>
</div>

<!--  note bootstrap 3.3.7 doesn't have navbar and 4.0.0-beta not working for navbar-->
<!--  also: jquery included here because full bootstrap functionality requires jquery-->
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>  
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
  
<script>
  
// Diane's note: My guess is we will want all of this to be changed to Java - I just wanted
// to get a couple of events working, and I don't know how to do it (yet!) in Java
  
// Class names that code is swapping in & out:
//    'currentPick': to reflect selected color
//    'hoverColor_0' thru 'hoverColor_5': to control the onhover colors in the game slots
//    'currentTry': to reflect the current guess row (1 - 8, starting at bottom)
  
  
//Variables:
//  'pick' is integer 0 - 5 for color selection (0 = red, 1 = orange, etc.)
//  'guessCtr' is integer 1 - 8 for which guess attempt user is on
//    (guessCtr would be initialized to 1 & then a fcn
//    would add 'currentTry' className to the relevant guessing row (& remove from others)
(function() {
  
  // Initialize variables for color pick and guessCtr
  var pick = 0;
  var guessCtr = 0;

  setCurrentTry(guessCtr);   // initializes guess row to 1st guess row
  setCurrentPicker(pick);   // initializes 'currentPick' class to the 1st color on the palette
  
  // Add event listeners for color picker
  document.getElementById("pick_0").addEventListener("click", function(){ setCurrentPicker(0); });
  document.getElementById("pick_1").addEventListener("click", function(){ setCurrentPicker(1); });
  document.getElementById("pick_2").addEventListener("click", function(){ setCurrentPicker(2); });
  document.getElementById("pick_3").addEventListener("click", function(){ setCurrentPicker(3); });
  document.getElementById("pick_4").addEventListener("click", function(){ setCurrentPicker(4); });
  document.getElementById("pick_5").addEventListener("click", function(){ setCurrentPicker(5); });

  // Add event listeners for clicks on game slots
  // ( sets events for row 1 only for now - TBD: expand with loop or other method for all guess rows)
  var slots = document.getElementById("guess_1").getElementsByClassName("slot");

  // Loop through all slots for guess row #1 and assign click event
  Array.prototype.filter.call(slots, function(el, i){
    el.addEventListener("click", function(){ setColor(i + 1); });
  });
  
  
  
  //  When user starts a new guess row (they have 8 tries), this fcn adds the 'currentTry' classname to 
  // that guess row and removes it from the other guess rows
  function setCurrentTry() {
    guessCtr++;
    
    var guesses = document.getElementsByClassName('guess');
    
    // Loop through all guesses and remove 'currentTry' class
    Array.prototype.filter.call(guesses, function(el){
      if (el.classList.contains("currentTry")) {
        el.classList.remove("currentTry");
      }
    });
    
    // Assign 'currentTry' class to current guess row
    document.getElementById("guess_" + guessCtr).classList.add("currentTry");

    // Remove hoverColor class from all guess rows
    removeHoverColor(1, 8);
    
    // Set new hoverColor class for the current guess row
    setHoverColor();
  }

  //  When user picks a color from the palette, this fcn adds the 'currentPick' classname to the color
  //  and removes it from any other color in the palette
  function setCurrentPicker(i) {
    var pickers = document.getElementsByClassName('picker');
    pick = i;
    
    // Loop through all pickers and remove 'currentPick' class
    Array.prototype.filter.call(pickers, function(el){
      if (el.classList.contains("currentPick")) {
        el.classList.remove("currentPick");
      }
    });
    
    // Assign 'currentPick' class to newly selected picker
    document.getElementById("pick_" + i).classList.add("currentPick");
    
    // Call functions to remove old hoverColor & set new hoverColor class for the current guess row
    removeHoverColor(guessCtr);
    setHoverColor();
  }
  
  // Fcn removes ALL hoverColor_ classes from one or more guess rows (for any 'pick' value)
  function removeHoverColor(startRow, endRow) {  
    var guess;
    
    // If no endRow argument passed, just use startRow as end value
    var end = (typeof endRow === "undefined") 
              ? startRow 
              : endRow;
    
    // Loop through guess rows & remove hoverColor classes
    for (var i = startRow; i <= end ; i++) {
      guess = document.getElementById('guess_' + i);
      for (var j = 0; j <=5 ; j++) {
        if (guess.classList.contains("hoverColor_" + j)) {
          guess.classList.remove("hoverColor_" + j);
        }
      }
    }
  }

  // Fcn sets hover color for the current guess row
  function setHoverColor() {
    var curGuess = document.getElementById("guess_" + guessCtr);
    
    // Add new hoverColor class for current color to the current guess row
    curGuess.classList.add("hoverColor_" + pick);
  }
  
  // Fcn sets the color of a slot in the current guess row
  function setColor(slotNum) {
    alert('TBD:\nSet slot #' + slotNum + ' to color #' + pick + '. KEY: \n0=red, \n1=orange, \n2=yellow, \n3=green, \n4=blue, \n5=purple');
  }

})();
</script>  

</body>
</html>
